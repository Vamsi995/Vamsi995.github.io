<!doctype html>
<!--
  Minimal Mistakes Jekyll Theme 4.24.0 by Michael Rose
  Copyright 2013-2020 Michael Rose - mademistakes.com | @mmistakes
  Free for personal and commercial use under the MIT license
  https://github.com/mmistakes/minimal-mistakes/blob/master/LICENSE
-->
<html lang="en" class="no-js">
  <head>
    <meta charset="utf-8">

<!-- begin _includes/seo.html --><title>Scheduler as a Platform | Alisetti Sai Vamsi</title>
<meta name="description" content="Platform - Airasia">


  <meta name="author" content="Alisetti Sai Vamsi">
  
  <meta property="article:author" content="Alisetti Sai Vamsi">
  


<meta property="og:type" content="article">
<meta property="og:locale" content="en_US">
<meta property="og:site_name" content="Alisetti Sai Vamsi">
<meta property="og:title" content="Scheduler as a Platform">
<meta property="og:url" content="http://localhost:4000/algorithm/test/">


  <meta property="og:description" content="Platform - Airasia">



  <meta property="og:image" content="http://localhost:4000/assets/images/waterfront.jpg">





  <meta property="article:published_time" content="2023-09-21T00:00:00+05:30">



  <meta property="article:modified_time" content="2019-07-10T18:36:00+05:30">



  

  


<link rel="canonical" href="http://localhost:4000/algorithm/test/">




<script type="application/ld+json">
  {
    "@context": "https://schema.org",
    
      "@type": "Person",
      "name": "Alisetti Sai Vamsi",
      "url": "http://localhost:4000/"
    
  }
</script>







<!-- end _includes/seo.html -->




<!-- https://t.co/dKP3o1e -->
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<script>
  document.documentElement.className = document.documentElement.className.replace(/\bno-js\b/g, '') + ' js ';
</script>

<!-- For all browsers -->
<link rel="stylesheet" href="/assets/css/main.css">
<link rel="preload" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5/css/all.min.css" as="style" onload="this.onload=null;this.rel='stylesheet'">
<noscript><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5/css/all.min.css"></noscript>



    <!-- start custom head snippets -->

<!-- insert favicons. use https://realfavicongenerator.net/ -->

<!-- end custom head snippets -->

  </head>

  <body class="layout--single">
    <nav class="skip-links">
  <ul>
    <li><a href="#site-nav" class="screen-reader-shortcut">Skip to primary navigation</a></li>
    <li><a href="#main" class="screen-reader-shortcut">Skip to content</a></li>
    <li><a href="#footer" class="screen-reader-shortcut">Skip to footer</a></li>
  </ul>
</nav>

    

<div class="masthead">
  <div class="masthead__inner-wrap">
    <div class="masthead__menu">
      <nav id="site-nav" class="greedy-nav">
        
          <a class="site-logo" href="/"><img src="/assets/images/landing/logo2.png" alt="Alisetti Sai Vamsi"></a>
        
        <a class="site-title" href="/">
          Alisetti Sai Vamsi
          <span class="site-subtitle">Portfolio</span>
        </a>
        <ul class="visible-links"><li class="masthead__menu-item">
              <a href="/research/">Research</a>
            </li><li class="masthead__menu-item">
              <a href="/projects/">Projects</a>
            </li><li class="masthead__menu-item">
              <a href="/education/">Education</a>
            </li><li class="masthead__menu-item">
              <a href="/achievements/">Achievements</a>
            </li><li class="masthead__menu-item">
              <a href="/CV/">CV</a>
            </li><li class="masthead__menu-item">
              <a href="/misc/">Misc</a>
            </li></ul>
        
        <button class="search__toggle" type="button">
          <span class="visually-hidden">Toggle search</span>
          <i class="fas fa-search"></i>
        </button>
        
        <button class="greedy-nav__toggle hidden" type="button">
          <span class="visually-hidden">Toggle menu</span>
          <div class="navicon"></div>
        </button>
        <ul class="hidden-links hidden"></ul>
      </nav>
    </div>
  </div>
</div>


    <div class="initial-content">
      
  







<div class="page__hero--overlay"
  style=" background-image: linear-gradient(rgba(0, 0, 0, 0.2), rgba(0, 0, 0, 0.2)), url('/assets/images/waterfront.jpg');"
>
  
    <div class="wrapper">
      <h1 id="page-title" class="page__title" itemprop="headline">
        
          Scheduler as a Platform

        
      </h1>
      
        <p class="page__lead">Platform - Airasia
</p>
      
      

  <p class="page__meta">
    
      
      <span class="page__meta-date">
        <i class="far fa-calendar-alt" aria-hidden="true"></i>
        
        <time datetime="2023-09-21T00:00:00+05:30">September 21, 2023</time>
      </span>
    

    <span class="page__meta-sep"></span>

    
      
      

      <span class="page__meta-readtime">
        <i class="far fa-clock" aria-hidden="true"></i>
        
          5 minute read
        
      </span>
    
  </p>


      
      
    </div>
  
  
    <span class="page__hero-caption">Photo credit: <a href="https://unsplash.com"><strong>Unsplash</strong></a>
</span>
  
</div>






  
    



<nav class="breadcrumbs">
  <ol itemscope itemtype="https://schema.org/BreadcrumbList">
    
    
    
      
        <li itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem">
          <a href="/" itemprop="item"><span itemprop="name">Home</span></a>

          <meta itemprop="position" content="1" />
        </li>
        <span class="sep">></span>
      
      
        
        <li itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem">
          <a href="/categories/#algorithm" itemprop="item"><span itemprop="name">Algorithm</span></a>
          <meta itemprop="position" content="2" />
        </li>
        <span class="sep">></span>
      
    
      
      
        <li class="current">Scheduler as a Platform</li>
      
    
  </ol>
</nav>

  


<script type="text/javascript"
  src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js?config=TeX-AMS_CHTML">
</script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    tex2jax: {
      inlineMath: [['$','$'], ['\\(','\\)']],
      processEscapes: true},
      jax: ["input/TeX","input/MathML","input/AsciiMath","output/CommonHTML"],
      extensions: ["tex2jax.js","mml2jax.js","asciimath2jax.js","MathMenu.js","MathZoom.js","AssistiveMML.js", "[Contrib]/a11y/accessibility-menu.js"],
      TeX: {
      extensions: ["AMSmath.js","AMSsymbols.js","noErrors.js","noUndefined.js"],
      equationNumbers: {
      autoNumber: "AMS"
      }
    }
  });
</script>

<div id="main" role="main">
  


  <article class="page h-entry" itemscope itemtype="https://schema.org/CreativeWork">
    <meta itemprop="headline" content="Scheduler as a Platform">
    <meta itemprop="description" content="Platform - Airasia">
    <meta itemprop="datePublished" content="2023-09-21T00:00:00+05:30">
    <meta itemprop="dateModified" content="2019-07-10T18:36:00+05:30">

    <div class="page__inner-wrap">
      

      <section class="page__content e-content" itemprop="text">
        
          <aside class="sidebar__right sticky">
            <nav class="toc">
              <header><h4 class="nav__title"><i class="fas fa-file-alt"></i> On this page</h4></header>
              

            </nav>
          </aside>
        
        <p>An essential component of every business is to schedule certain tasks for automation. For this purpose google cloud platform provides cloud schedulers that have the capability to schedule jobs. But have you ever faced an issue where there are a plethora of cloud schedulers and it becomes difficult to manage them only through gui interface that google provides? If you’ve been there, then this blog post covers how we at airasia built a stand alone stateless platform to manage bulk updates to schedulers and provide a versatile platform that can be reused by multiple lob’s. Before we dive into the problem, lets first understand the platform provided by google.
Understanding GCP cloud schedulers</p>

<p>Google Cloud Schedulers offer a GUI interface to perform CRUD operations wrt to schedulers and also provide us with additional features such as force run, pausing/resuming jobs, etc. These cloud schedulers also offer multiple targets, i.e we can setup schedulers to target a http url, pub sub topic, or app engine job. They also provide us with insights about the last scheduler run, status of the current scheduler run, and next scheduler run. It also has an additional capability to force run certain jobs on demand.</p>

<p>Coming to the pricing of these schedulers, according to google, the pricing is based on the job but not on the number of times it executes i.e irrespective of the number of times the job is called or the type of job or the status of the job (even paused job), the job is billed by $0.1/job/31 days.The bill on the job is calculated per day, i.e for instance a single job is defined and deleted 10 days later then that job is billed as $0.1/31 times 10 which is 0.03$.
Need for the platform
Some of the critical issues that we found while we are trying to scale our schedulers are:
Time consuming to update a specific job using gui manuallyReduced productivity of the team
Managing schedulers on a scale is quite cumbersomeOften led to human prone errors 
Multiple Schedulers for different purposes, all in one place.Difficult to group different tasks based on usage
Advanced Configuration OptionsComplex configuration options like min-backoff, max-backoff, max-doublings that not everyone understands.
Difficult to read cron expressionsNeed a solution to convert cron expressions to human readable format.
Lack of state managementOnce accidentally deleted, very difficult to bring it back up, since there is no tracking of the previous state.
Paused jobs are also billed according to the pricing overview.
Because of these issues, we needed an efficient/scalable solution to manage cloud schedulers and also provide a way for the team to manage schedulers by abstracting away the knowledge required to use google cloud schedulers. Enter Scheduler as a platform
What is Scheduler as a platform?
Scheduler as a Platform is an intelligent, scalable and cost-effective scheduler management solution that offers effortless on-the-fly control with config-driven, template based scheduling.</p>

<p>Features it offers</p>

<p>One Click Pipeline - We have integrated the google sheets with gitlab pipeline using google appscript. Now with a single click, we can run this pipeline to manage schedulers on a scale.
Config Driven Management - We use template based google sheets to maintain scheduler configuration state.
Stateless Design - Lightweight gitlab pipeline that does not store any scheduler state information.
Platform Agnostic - Does not rely on any platform or lob related services/variables.
User Friendly - Knowledge of understanding google cloud schedulers is not required to setup schedulers. Anyone with access to the gsheet can setup schedulers on the fly, with a single click.
Easily Reproducible - Instantaneous setup/teardown of cloud schedulers on a scale.
Design</p>

<p>We initially thought about a stateful design that includes a database and a microservice to drive the functions, but because of the cost overhead that it incurs we went for a simpler approach using a stateless design by leveraging gitlab ci pipelines as the platform and google sheets to maintain the scheduler configuration.This activity of choosing a stateless design reduced almost 100% of the cost that would’ve been burned on a database/microservice maintenance.
Data processing</p>

<p>The platform performs the following stages in order to transform the data from the google sheets to appropriate scheduler state information. 
Template Manager: The template manager is used to decode the state information from the google sheet templates that we use to abstract scheduler configuration.
Validation: The validation module performs sanity checks to make sure that the gsheet data that the platform reads is coherent and consistent.
Processing Module: This is the heart of the platform where it fetches the current state from the google cloud scheduler platform and cross checks it with the gsheet configuration provided.
Aggregate: The aggregation module pulls out the scheduler id’s that require a change, and performs the necessary cloud scheduler action.
Templates
We followed a template based approach, wherein a separate gsheet holds the configuration for the schedulers to be created so that we can abstract away all the complex configuration so that the sheet looks more intuitive. For example, consider the below template sheet and the scheduler sheet.</p>

<p>After the template management process in the platform the data is transformed into the following:</p>

<p>The template holds formatting rules, that needs to be applied ot the scheduler sheet data. Here we defined our formatting string to be as follows:
Generic Format String: -a | -b | -c 
Any “-” (hyphen) before a word implies that it is a column name, and a “|” (pipe) implies a concatenation operation. Hence the above format string implies a concatenation operation between the column a, column b, column c.
In the same way if we look at our template gsheet, we can see that the schedulerName field has a format string of -flightType | -mode. This tells the platform that the sheet data needs to be transformed and the schedulerName should be a concatenation of flightType column and mode column from the scheduler sheet data. Similarly this format string can be placed anywhere in the template sheet except for the template name and environment which are absolute values. We can also place these format strings in the data column which is a json payload. It can be placed at any nested level, since a DFS search is made to evaluate any such format string.
This way we give freedom to the person creating the schedulers to maintain the sheet however they wish, creating as many columns as required and creating the appropriate format strings in the template.
Platform Usage
We used app script to integrate google sheets with gitlab pipeline so that a single click can automate the entire process of scheduler management.</p>


        
      </section>

      <footer class="page__meta">
        
        
  


  

  <p class="page__taxonomy">
    <strong><i class="fas fa-fw fa-tags" aria-hidden="true"></i> Tags: </strong>
    <span itemprop="keywords">
    
      <a href="/tags/#ai" class="page__taxonomy-item p-category" rel="tag">AI</a>
    
    </span>
  </p>




  


  

  <p class="page__taxonomy">
    <strong><i class="fas fa-fw fa-folder-open" aria-hidden="true"></i> Categories: </strong>
    <span itemprop="keywords">
    
      <a href="/categories/#algorithm" class="page__taxonomy-item p-category" rel="tag">Algorithm</a>
    
    </span>
  </p>


        

  <p class="page__date"><strong><i class="fas fa-fw fa-calendar-alt" aria-hidden="true"></i> Updated:</strong> <time class="dt-published" datetime="2019-07-10">July 10, 2019</time></p>

      </footer>

      <section class="page__share">
  
    <h4 class="page__share-title">Share on</h4>
  

  <a href="https://twitter.com/intent/tweet?text=Scheduler+as+a+Platform%20http%3A%2F%2Flocalhost%3A4000%2Falgorithm%2Ftest%2F" class="btn btn--twitter" onclick="window.open(this.href, 'window', 'left=20,top=20,width=500,height=500,toolbar=1,resizable=0'); return false;" title="Share on Twitter"><i class="fab fa-fw fa-twitter" aria-hidden="true"></i><span> Twitter</span></a>

  <a href="https://www.facebook.com/sharer/sharer.php?u=http%3A%2F%2Flocalhost%3A4000%2Falgorithm%2Ftest%2F" class="btn btn--facebook" onclick="window.open(this.href, 'window', 'left=20,top=20,width=500,height=500,toolbar=1,resizable=0'); return false;" title="Share on Facebook"><i class="fab fa-fw fa-facebook" aria-hidden="true"></i><span> Facebook</span></a>

  <a href="https://www.linkedin.com/shareArticle?mini=true&url=http%3A%2F%2Flocalhost%3A4000%2Falgorithm%2Ftest%2F" class="btn btn--linkedin" onclick="window.open(this.href, 'window', 'left=20,top=20,width=500,height=500,toolbar=1,resizable=0'); return false;" title="Share on LinkedIn"><i class="fab fa-fw fa-linkedin" aria-hidden="true"></i><span> LinkedIn</span></a>
</section>


      
  <nav class="pagination">
    
      <a href="/algorithm/test-copy/" class="pagination--pager" title="Winter of Code
">Previous</a>
    
    
      <a href="#" class="pagination--pager disabled">Next</a>
    
  </nav>

    </div>

    
  </article>

  
  
    <div class="page__related">
      <h2 class="page__related-title">You may also enjoy</h2>
      <div class="grid__wrapper">
        
          



<div class="grid__item">
  <article class="archive__item" itemscope itemtype="https://schema.org/CreativeWork">
    
      <div class="archive__item-teaser">
        <img src="/assets/images/images.jpeg" alt="">
      </div>
    
    <h2 class="archive__item-title no_toc" itemprop="headline">
      
        <a href="/algorithm/test-copy/" rel="permalink">Winter of Code
</a>
      
    </h2>
    

  <p class="page__meta">
    
      
      <span class="page__meta-date">
        <i class="far fa-fw fa-calendar-alt" aria-hidden="true"></i>
        
        <time datetime="2023-07-21T00:00:00+05:30">July 21, 2023</time>
      </span>
    

    <span class="page__meta-sep"></span>

    
      
      

      <span class="page__meta-readtime">
        <i class="far fa-fw fa-clock" aria-hidden="true"></i>
        
          less than 1 minute read
        
      </span>
    
  </p>


    <p class="archive__item-excerpt" itemprop="description">My journey through winter of code program
</p>
  </article>
</div>

        
      </div>
    </div>
  
  
</div>

    </div>

    
      <div class="search-content">
        <div class="search-content__inner-wrap"><form class="search-content__form" onkeydown="return event.key != 'Enter';" role="search">
    <label class="sr-only" for="search">
      Enter your search term...
    </label>
    <input type="search" id="search" class="search-input" tabindex="-1" placeholder="Enter your search term..." />
  </form>
  <div id="results" class="results"></div></div>

      </div>
    

    <div id="footer" class="page__footer">
      <footer>
        <!-- start custom footer snippets -->

<!-- end custom footer snippets -->
        <div class="page__footer-follow">
  <ul class="social-icons">
    
      <li><strong>Follow:</strong></li>
    

    
      
        
          <li><a href="https://twitter.com/vumsee_" rel="nofollow noopener noreferrer"><i class="fab fa-fw fa-twitter-square" aria-hidden="true"></i> Twitter</a></li>
        
      
        
          <li><a href="https://facebook.com/alisetti.vamsi" rel="nofollow noopener noreferrer"><i class="fab fa-fw fa-facebook-square" aria-hidden="true"></i> Facebook</a></li>
        
      
        
          <li><a href="https://github.com/Vamsi995" rel="nofollow noopener noreferrer"><i class="fab fa-fw fa-github" aria-hidden="true"></i> GitHub</a></li>
        
      
        
          <li><a href="https://instagram.com/_v.um.see_" rel="nofollow noopener noreferrer"><i class="fab fa-fw fa-instagram" aria-hidden="true"></i> Instagram</a></li>
        
      
        
          <li><a href="https://stackoverflow.com/users/12236439/sai-vamsi" rel="nofollow noopener noreferrer"><i class="fab fa-stack-overflow" aria-hidden="true"></i> StackOverflow</a></li>
        
      
        
          <li><a href="https://www.linkedin.com/in/sai-vamsi-alisetti/" rel="nofollow noopener noreferrer"><i class="fab fa-fw fa-linkedin" aria-hidden="true"></i> LinkedIn</a></li>
        
      
        
          <li><a href="mailto:saivamsi.ds123@gmail.com" rel="nofollow noopener noreferrer"><i class="fas fa-fw fa-envelope-square" aria-hidden="true"></i> Email</a></li>
        
      
    

    
  </ul>
</div>

<div class="page__footer-copyright">&copy; 2023 Alisetti Sai Vamsi. Powered by <a href="https://jekyllrb.com" rel="nofollow">Jekyll</a> &amp; <a href="https://mademistakes.com/work/minimal-mistakes-jekyll-theme/" rel="nofollow">Minimal Mistakes</a>.</div>

      </footer>
    </div>

    
  <script src="/assets/js/main.min.js"></script>




<script src="/assets/js/lunr/lunr.min.js"></script>
<script src="/assets/js/lunr/lunr-store.js"></script>
<script src="/assets/js/lunr/lunr-en.js"></script>







  </body>
</html>
